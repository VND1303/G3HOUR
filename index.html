<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Brújula</title>
    <style>
        body { font-family: monospace; font-size: 2rem; background: #111; color: #eee; display: grid; place-items: center; min-height: 100vh; text-align: center; }
        pre { background: #333; padding: 2rem; border-radius: 10px; }
        button { font-size: 1.5rem; padding: 1rem; background: #007bff; color: white; border: none; border-radius: 8px; }
    </style>
</head>
<body>
    <div>
        <button id="start-button">Iniciar Test de Brújula</button>
        <pre id="output">Esperando datos...</pre>
    </div>
    <script>
        const output = document.getElementById('output');
        const startButton = document.getElementById('start-button');

        startButton.addEventListener('click', () => {
            // Pedir permiso para iOS (es buena práctica incluirlo)
            if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission()
                    .then(state => {
                        if (state === 'granted') {
                            window.addEventListener('deviceorientation', handleOrientation);
                        }
                    })
                    .catch(console.error);
            } else {
                // Para Android
                window.addEventListener('deviceorientation', handleOrientation);
            }
            startButton.textContent = "Sensor Activado";
        });

        function handleOrientation(event) {
            // event.alpha es la brújula (0-360, 0=Norte)
            // event.webkitCompassHeading es una alternativa para algunos navegadores
            const compass = event.alpha || event.webkitCompassHeading;
            output.textContent = `
Brújula (Alpha): 
${compass ? compass.toFixed(2) : 'null'}

Beta (Adelante/Atrás):
${event.beta ? event.beta.toFixed(2) : 'null'}

Gamma (Izq/Der):
${event.gamma ? event.gamma.toFixed(2) : 'null'}
            `;
        }
    </script>
</body>
</html>
